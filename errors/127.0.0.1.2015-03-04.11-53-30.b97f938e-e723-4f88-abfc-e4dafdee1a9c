(dp1
S'output'
p2
S"<type 'exceptions.KeyError'> 'http://news.rti.org.tw/news/detail/%3FrecordId%3D173507'"
p3
sS'layer'
p4
S'/Users/logyuan/Documents/web2py/applications/fbbrt/controllers/newsAPI.py'
p5
sS'code'
p6
S'# coding: utf8\n# try something like\nimport urllib\nimport json\nimport dateutil\nimport datetime\nimport string\nimport re\nimport itertools\nfrom collections import Counter\nfrom collections import OrderedDict\nfrom dateutil import parser\nfrom datetime import timedelta\nimport jieba\nimport jieba.analyse\nimport jieba.posseg as pseg\nfrom snownlp import SnowNLP\nfrom snownlp import sentiment\nfrom datetime import timedelta\nfrom operator import itemgetter\nimport codecs\nimport os\n\n#pos_train = os.path.join(request.folder,\'private\',\'dictionary\',\'pos.txt\')\n#nag_train = os.path.join(request.folder,\'private\',\'dictionary\',\'nag.txt\')\n#sentiment.train(pos_train, nag_train)\n\n#sentiment.save(os.path.join(request.folder,\'private\',\'sentiment.marshal\'))\n# sentiment.train(\'/usr/local/lib/python2.7/site-packages/snownlp/sentiment/blue.txt\', \'/usr/local/lib/python2.7/site-packages/snownlp/sentiment/green.txt\')\n#sentiment.save(\'/usr/local/lib/python2.7/site-packages/snownlp/sentiment/sentiment.marshal\')\n\n\ndictionary_path = os.path.join(request.folder,\'private\',\'dictionary\',\'dict.txt.big.txt\')\nuserdict_path = os.path.join(request.folder,\'private\',\'dictionary\',\'userdict.txt\')\nstopwords_path = os.path.join(request.folder,\'private\',\'dictionary\',\'stop_words.txt\')\nidf_path = os.path.join(request.folder,\'private\',\'dictionary\',\'idf.txt.big.txt\')\n\njieba.set_dictionary(dictionary_path)\njieba.load_userdict(userdict_path)\njieba.analyse.set_stop_words(stopwords_path)\njieba.analyse.set_idf_path(idf_path)\n\nstopwords_file = open(stopwords_path, \'r\')\nstopwords = [unicode(line.strip(\'\\n\'), "utf-8") for line in stopwords_file.readlines()]\n\n\n#jieba.initialize()\n\n\ndelEnStr = string.punctuation + \' \' + string.digits\ndelZhStr = u\'\xe3\x80\x8a\xe3\x80\x8b\xef\xbc\x88\xef\xbc\x89&%\xef\xbf\xa5#@\xef\xbc\x81{}\xe3\x80\x90\xe3\x80\x91\xe3\x80\x8c\xe3\x80\x8d\xe3\x80\x8e\xe3\x80\x8f\xef\xbc\x9f\xef\xbd\x9c\xef\xbc\x8c\xe3\x80\x81\xe3\x80\x82\xef\xbc\x9a\xef\xbc\x9b\xe4\xb8\xb6\xef\xbd\x9e\xe3\x80\x80\' + delEnStr.encode(\'utf8\')\n\n\ndef index():\n    started_time = datetime.datetime.now()\n    Brtnews24_url = "https://www.kimonolabs.com/api/47bg0pfm?apikey=22879e6cd7538eea6e95b90aa70afccc"\n    Brtnews7days_url = "https://www.kimonolabs.com/api/ajldjyxq?apikey=22879e6cd7538eea6e95b90aa70afccc"\n    Brtnews30days_url = "https://www.kimonolabs.com/api/5xnus1ws?apikey=22879e6cd7538eea6e95b90aa70afccc"\n    Brtnews1year_url = "https://www.kimonolabs.com/api/d1shcaww?apikey=22879e6cd7538eea6e95b90aa70afccc"\n    kimono_api(Brtnews30days_url, "BRT")\n    \n\n    mayor24_url = "https://www.kimonolabs.com/api/7br3eu62?apikey=22879e6cd7538eea6e95b90aa70afccc"\n    mayor7days_url = "https://www.kimonolabs.com/api/863lok12?apikey=22879e6cd7538eea6e95b90aa70afccc"\n    mayor30days_url = "https://www.kimonolabs.com/api/8h259vhq?apikey=22879e6cd7538eea6e95b90aa70afccc"\n    mayor1year_url = "https://www.kimonolabs.com/api/cs5dtbm0?apikey=22879e6cd7538eea6e95b90aa70afccc"\n    #kimono_api(mayor1year_url, "\xe6\x9e\x97\xe4\xbd\xb3\xe9\xbe\x8d")\n\n    today = datetime.datetime.today()\n    date = today - timedelta(days=3)\n    fromdate = datetime.datetime.strftime(date, "%Y/%m/%d")\n    todate = datetime.datetime.strftime(today, "%Y/%m/%d")\n    #checkDBNewsComments()\n    #checkDBNewsCommentsFromDate(fromdate)\n    ended_time = datetime.datetime.now()\n    fbdb.event_logs.insert(function=\'kimono_api\', started_time=started_time, ended_time=ended_time)\n    fbdb.commit()\n    started_time = datetime.datetime.now()\n    Socialcount()\n    ended_time = datetime.datetime.now()\n    fbdb.event_logs.insert(function=\'updateSocialcount\', started_time=started_time, ended_time=ended_time)\n    fbdb.commit()\n    started_time = datetime.datetime.now()\n    checkDBNewsComments()\n    ended_time = datetime.datetime.now()\n    fbdb.event_logs.insert(function=\'checkDBNewsComments\', started_time=started_time, ended_time=ended_time)\n    fbdb.commit()\n\n\n\n\n    return "OK"\n\ndef test():\n    result=convertNewsComms(\'812216578849978_812222405516062\')\n    return result\n    #return response.json(get_og_url(\'http://news.ltn.com.tw/news/opinion/breakingnews/1222089\'))\n\ndef test2():\n    started_time = datetime.datetime.now()\n    newsbrt = NewsGroup(\'BRT\')\n    newsbrt.updateAllSocialCount()\n    ended_time = datetime.datetime.now()\n    fbdb.event_logs.insert(function=\'updateAllSocialCount\', started_time=started_time, ended_time=ended_time)\n    fbdb.commit()\n\n    #test5=getGroupUrlsSocialCount("http://udn.com/news/story/7548/677801,http://news.ltn.com.tw/news/local/paper/852017,http://www.chinatimes.com/newspapers/20150223000068-260210,http://www.appledaily.com.tw/realtimenews/article/new/20150112/540406/,http://www.chinatimes.com/realtimenews/20150223002434-260405")\n    #return str(test5)\n    #newsbrt = NewsGroup(\'BRT\')\n    #return newsbrt.url_list\n\n\ndef commentsByKeywords():\n    key = \'%\xe5\xa5\xb3\xe6\x80\xa7%\'\n    rows = fbdb(fbdb.news.summary.like(key)).select()\n    newslist = []\n    for row in rows:\n        if row["fid"] != None:\n            newslist.append(row["fid"])\n    rows = fbdb(fbdb.news_comments.news_fid.belongs(newslist)).select()\n    comments = []\n    likes = []\n    for row in rows:\n        if row["like_count"] > 10:\n            news = fbdb(fbdb.news.fid == row["news_fid"]).select().first()\n            comments.append(\'news_title:\' + row["news_fid"] + news["title"] + \' like_count:\' + str(\n                row["like_count"]) + \' message: \' + row["message"])\n            likes.append(row["like_count"])\n    likes, comments = [list(x) for x in zip(*sorted(zip(likes, comments), key=itemgetter(0), reverse=True))]\n\n    return dict(comments=comments)\n\n@auth.requires_login()\ndef Socialcount():\n    rows = fbdb(fbdb.news.id <> \'\').select()\n    for row in rows:\n        news_object = News(row.href)\n        news_object.updateSocialCount()\n\n    return \'OK\'\n\ndef fix_url():\n    rows = fbdb(fbdb.news_comments.news_fid == None).select()\n    for row in rows:\n        fid = row["fid"]\n        news_fid = fid.split(\'_\')[0]\n        #url = "http://" + urllib.quote(href.split("http://")[1])\n        #og = get_og_url(url)\n        #fid = og["fid"]\n        #fb_url = og["fb_url"]\n\n        row.update_record(news_fid=news_fid)\n\n@auth.requires_login()\ndef update_socialcount():\n    rows = fbdb(fbdb.news.fid <> None).select()\n    test=[]\n    for row in rows:\n        news_object = News(row.href)\n        test.append(news_object.fb_url)\n        news_object.updateSocialCount()\n        \n\n    return test\n\ndef fix_seg():\n    rows = fbdb(fbdb.news_comments.id <> \'\').select()\n    for row in rows:\n        message = row["message"]\n        segment = list(jieba.cut(message))\n        row.update_record(segment=segment)\n\n\ndef kimono_api(url, from_team):\n    response = urllib.urlopen(url)\n    data = json.load(response)\n    updatedtime = parser.parse(data["lastsuccess"]) + timedelta(hours=8)\n    news_array = data["results"]["collection1"]\n    for news in news_array:\n        date_time = news["datetime"]\n        if u\' \xe5\xb0\x8f\xe6\x99\x82\xe5\x89\x8d\' in date_time:\n            hours = int(date_time.strip(u\' \xe5\xb0\x8f\xe6\x99\x82\xe5\x89\x8d\'))\n            date_time = updatedtime - timedelta(hours=hours)\n        elif u\' \xe5\x88\x86\xe9\x90\x98\xe5\x89\x8d\' in date_time:\n            minutes = int(date_time.strip(u\' \xe5\x88\x86\xe9\x90\x98\xe5\x89\x8d\'))\n            date_time = updatedtime - timedelta(minutes=minutes)\n        else:\n            date_time = date_time.replace(u\'\xe5\xb9\xb4\', \'/\').replace(u\'\xe6\x9c\x88\', \'/\').strip(u\'\xe6\x97\xa5\')\n            date_time = parser.parse(date_time) + timedelta(hours=12)\n\n        source = news["source"]\n        summary = news["summary"]\n        title = news["title"]["text"]\n        href = news["title"]["href"]\n        photo = news["photo"]["src"] if \'src\' in news["photo"] else \'\'\n\n        related_news = []\n        related_news_date_time = []\n        related_news_source = []\n\n        # if isinstance(news["related_news_datetime"], list):\n        #     for item in news["related_news_datetime"]:\n        #         if u\' \xe5\xb0\x8f\xe6\x99\x82\xe5\x89\x8d\' in item:\n        #             hours = int(item.strip(u\' \xe5\xb0\x8f\xe6\x99\x82\xe5\x89\x8d\'))\n        #             item = updated_time - timedelta(hours=hours)\n        #             related_news_date_time.append(item)\n        #         elif u\' \xe5\x88\x86\xe9\x90\x98\xe5\x89\x8d\' in item:\n        #             minutes = int(item.strip(u\' \xe5\x88\x86\xe9\x90\x98\xe5\x89\x8d\'))\n        #             item = updated_time - timedelta(minutes=minutes)\n        #             related_news_date_time.append(item)\n        #         else:\n        #             item = item.replace(u\'\xe5\xb9\xb4\', \'/\').replace(u\'\xe6\x9c\x88\', \'/\').strip(u\'\xe6\x97\xa5\')\n        #             item = parser.parse(item) + timedelta(hours=12)\n        #             related_news_date_time.append(item)\n        #     related_news = news["related_news"]\n        #     related_news_source = news["related_news_source"]\n        # elif news["related_news_datetime"] == "":\n        #     pass\n        # else:\n        #     if u\' \xe5\xb0\x8f\xe6\x99\x82\xe5\x89\x8d\' in news["related_news_datetime"]:\n        #         hours = int(news["related_news_datetime"].strip(u\' \xe5\xb0\x8f\xe6\x99\x82\xe5\x89\x8d\'))\n        #         related_news_date_time2 = updated_time - timedelta(hours=hours)\n        #     elif u\' \xe5\x88\x86\xe9\x90\x98\xe5\x89\x8d\' in news["related_news_datetime"]:\n        #         minutes = int(news["related_news_datetime"].strip(u\' \xe5\x88\x86\xe9\x90\x98\xe5\x89\x8d\'))\n        #         related_news_date_time2 = updated_time - timedelta(minutes=minutes)\n        #     else:\n        #         related_news_date_time2 = news["related_news_datetime"].replace(u\'\xe5\xb9\xb4\', \'/\').replace(u\'\xe6\x9c\x88\', \'/\').strip(\n        #             u\'\xe6\x97\xa5\')\n        #         related_news_date_time2 = parser.parse(related_news_date_time2) + timedelta(hours=12)\n        #\n        #     related_news.append(news["related_news"])\n        #     related_news_date_time.append(related_news_date_time2)\n        #     related_news_source.append(news["related_news_source"])\n        if href != \'\':\n            #url = "http://" + urllib.quote(href.split("http://")[1])\n            href = href.strip()\n            url2 = href.split("://")[0] + "://" + urllib.quote(href.split("://")[1])\n            og = get_og_url(url2)\n            # fid = og["fid"]\n            # fb_url = og["fb_url"]\n            # created_time = og["created_time"]\n            # updated_time = og["updated_time"]\n            # share_count = og["share_count"]\n            # comment_count = og["comment_count"]\n            if og["title"] == None:\n                og["title"] = title\n            fbdb.news.update_or_insert(fbdb.news.href==href,from_team=from_team, href=href,summary=summary, source=source, date_time=date_time,  **og)\n            # fbdb.news.update_or_insert(fbdb.news.href==href, fb_url=fb_url, href=href, created_time=created_time,updated_time=updated_time, date_time=date_time, source=source, summary=summary, title=title, photo=photo, related_news=json.dumps(related_news),\n            #                  related_news_date_time=related_news_date_time,\n            #                  related_news_source=json.dumps(related_news_source), from_team=from_team,\n            #                  share_count=share_count, comment_count=comment_count)\n            fbdb.commit()\n\n                #getUrlSocialCount(fb_url)\n\n    return json.dumps(data)\n    #return "Success!"\n    #return dict(message="hello from newsAPI.py")\n\ndef checkDBNewsCommentsFromDate(from_date):\n    from_date = datetime.datetime.strptime(from_date, "%Y/%m/%d")\n    rows = fbdb(fbdb.news.date_time >= from_date).select()\n    for row in rows:\n        ids = row["fid"]\n        if ids != None:\n            #ids = "http://" + urllib.quote(ids.split("http://")[1])\n            from_team = row["from_team"]\n            news_source = row["source"]\n            getNewsComments(ids, from_team, news_source)\n\n@auth.requires_login()\ndef checkDBNewsComments():\n    rows = fbdb((fbdb.news.fid <> None) & (fbdb.news.comment_count > 0)).select()  #\n    for row in rows:\n        ids = row["fid"]\n        href = row["href"]\n        if ids != None:\n            #ids = "http://" + urllib.quote(ids.split("http://")[1])\n            from_team = row["from_team"]\n            news_source = row["source"]\n            getNewsComments(ids, from_team, news_source, href)\n\n    return "Ok"\n\ndef BestComments():\n    stoplist = list(delZhStr)\n    stoplist.extend(stopwords)\n    p_wordclouds = []\n    p_wordcloud = []\n    p_wordclouds2 = []\n\n    male_wordcloud = []\n    female_wordcloud = []\n\n    male_wordclouds = []\n    male_wordclouds_a = []\n    male_wordclouds_n = []\n    male_wordclouds_nr = []\n    male_wordclouds_v = []\n\n    female_wordclouds = []\n    female_wordclouds_a = []\n    female_wordclouds_n = []\n    female_wordclouds_nr = []\n    female_wordclouds_v = []\n\n    male_wordcloud_a = []\n    male_wordcloud_n = []\n    male_wordcloud_nr = []\n    male_wordcloud_v = []\n\n    female_wordcloud_a = []\n    female_wordcloud_n = []\n    female_wordcloud_nr = []\n    female_wordcloud_v = []\n\n    wordcloud_a = []\n    wordcloud_n = []\n    wordcloud_nr = []\n    wordcloud_v = []\n    wordcloud_a2 = []\n    wordcloud_n2 = []\n    wordcloud_nr2 = []\n    wordcloud_v2 = []\n\n    now = datetime.datetime.today()\n    q_time = now - timedelta(days=7)\n    #rows = fbdb((fbdb.news_comments.like_count >= 1)&(fbdb.news_comments.from_team==\'\xe9\x80\xa3\xe5\x8b\x9d\xe6\x96\x87\')&(fbdb.news_comments.created_time >=q_time)).select()\n    rows = fbdb(fbdb.news_comments.id <> \'\').select()\n    for row in rows:\n        #segments = list(set(row[\'segment\']))\n        segments = pseg.cut(row[\'message\'])\n        count = row["like_count"]  #// 10\n        #count= 1\n        wordclouds_a = []\n        wordclouds_n = []\n        wordclouds_nr = []\n        wordclouds_v = []\n        for j in range(0, count):\n            for i in segments:\n                if (i.word not in stoplist):\n                    p_wordclouds2.append(i.word)\n                if (re.search("^a", i.flag) <> None) & (i.word not in stoplist):\n                    wordclouds_a.append(i.word)\n                elif (i.flag == \'n\') & (i.word not in stoplist):\n                    wordclouds_n.append(i.word)\n                elif (i.flag == \'nr\') & (i.word not in stoplist):\n                    wordclouds_nr.append(i.word)\n                elif (re.search("^v", i.flag) <> None) & (i.word not in stoplist):\n                    wordclouds_v.append(i.word)\n        p_wordclouds.extend(p_wordclouds2)\n        userid = row["from_id"]\n        user = fbdb(fbdb.people.uid == userid).select().first()\n        sex = user[\'gender\'] if user else None\n        #likes = row[\'likes\'] if ((\'likes\' in row) & (row[\'likes\'] != None) & (row[\'likes\'] != {})) else []\n        #for like in likes:\n        wordcloud_a2.extend(list(set(wordclouds_a)))\n        wordcloud_n2.extend(list(set(wordclouds_n)))\n        wordcloud_nr2.extend(list(set(wordclouds_nr)))\n        wordcloud_v2.extend(list(set(wordclouds_v)))\n\n        if sex == \'female\':\n            female_wordclouds.extend(list(set(p_wordclouds2)))\n            female_wordclouds_a.extend(list(set(wordclouds_a)))\n            female_wordclouds_n.extend(list(set(wordclouds_n)))\n            female_wordclouds_nr.extend(list(set(wordclouds_nr)))\n            female_wordclouds_v.extend(list(set(wordclouds_v)))\n        elif sex == \'male\':\n            male_wordclouds.extend(list(set(p_wordclouds2)))\n            male_wordclouds_a.extend(list(set(wordclouds_a)))\n            male_wordclouds_n.extend(list(set(wordclouds_n)))\n            male_wordclouds_nr.extend(list(set(wordclouds_nr)))\n            male_wordclouds_v.extend(list(set(wordclouds_v)))\n        else:\n            pass\n    for item in Counter(wordcloud_a2).most_common(150):\n        #s = SnowNLP(item[0]) , \'tag\': s.tags\n        wordcloud_a.append({\'name\': item[0], \'size\': item[1]})\n    for item in Counter(wordcloud_n2).most_common(150):\n        #s = SnowNLP(item[0]) , \'tag\': s.tags\n        wordcloud_n.append({\'name\': item[0], \'size\': item[1]})\n    for item in Counter(wordcloud_nr2).most_common(150):\n        #s = SnowNLP(item[0]) , \'tag\': s.tags\n        wordcloud_nr.append({\'name\': item[0], \'size\': item[1]})\n    for item in Counter(wordcloud_v2).most_common(150):\n        #s = SnowNLP(item[0]) , \'tag\': s.tags\n        wordcloud_v.append({\'name\': item[0], \'size\': item[1]})\n\n    for item in Counter(female_wordclouds).most_common(150):\n        #s = SnowNLP(item[0]) , \'tag\': s.tags\n        female_wordcloud.append({\'name\': item[0], \'size\': item[1]})\n    for item in Counter(male_wordclouds).most_common(150):\n        #s = SnowNLP(item[0]) , \'tag\': s.tags\n        male_wordcloud.append({\'name\': item[0], \'size\': item[1]})\n\n    list_a_female100 = []\n    list_n_female100 = []\n    list_nr_female100 = []\n    list_v_female100 = []\n\n    for item in Counter(female_wordclouds_a).most_common(100):\n        #s = SnowNLP(item[0]) , \'tag\': s.tags\n        female_wordcloud_a.append({\'name\': item[0], \'size\': item[1]})\n        list_a_female100.append(item[0])\n\n    for item in Counter(female_wordclouds_n).most_common(100):\n        #s = SnowNLP(item[0]) , \'tag\': s.tags\n        female_wordcloud_n.append({\'name\': item[0], \'size\': item[1]})\n        list_n_female100.append(item[0])\n\n    for item in Counter(female_wordclouds_nr).most_common(100):\n        #s = SnowNLP(item[0]) , \'tag\': s.tags\n        female_wordcloud_nr.append({\'name\': item[0], \'size\': item[1]})\n        list_nr_female100.append(item[0])\n\n    for item in Counter(female_wordclouds_v).most_common(100):\n        #s = SnowNLP(item[0]) , \'tag\': s.tags\n        female_wordcloud_v.append({\'name\': item[0], \'size\': item[1]})\n        list_v_female100.append(item[0])\n\n    list_a_male100 = []\n    list_n_male100 = []\n    list_nr_male100 = []\n    list_v_male100 = []\n\n    for item in Counter(male_wordclouds_a).most_common(100):\n        #s = SnowNLP(item[0]) , \'tag\': s.tags\n        male_wordcloud_a.append({\'name\': item[0], \'size\': item[1]})\n        list_a_male100.append(item[0])\n\n    for item in Counter(male_wordclouds_n).most_common(100):\n        #s = SnowNLP(item[0]) , \'tag\': s.tags\n        male_wordcloud_n.append({\'name\': item[0], \'size\': item[1]})\n        list_n_male100.append(item[0])\n\n    for item in Counter(male_wordclouds_nr).most_common(100):\n        #s = SnowNLP(item[0]) , \'tag\': s.tags\n        male_wordcloud_nr.append({\'name\': item[0], \'size\': item[1]})\n        list_nr_male100.append(item[0])\n\n    for item in Counter(male_wordclouds_v).most_common(100):\n        #s = SnowNLP(item[0]) , \'tag\': s.tags\n        male_wordcloud_v.append({\'name\': item[0], \'size\': item[1]})\n        list_v_male100.append(item[0])\n\n    female_wordcloud_a_special = []\n    female_wordcloud_n_special = []\n    female_wordcloud_nr_special = []\n    female_wordcloud_v_special = []\n\n    for item in Counter(female_wordclouds_a).most_common(100):\n        if item[0] not in list_a_male100:\n            female_wordcloud_a_special.append({\'name\': item[0], \'size\': item[1]})\n\n    for item in Counter(female_wordclouds_n).most_common(100):\n        if item[0] not in list_n_male100:\n            female_wordcloud_n_special.append({\'name\': item[0], \'size\': item[1]})\n\n    for item in Counter(female_wordclouds_nr).most_common(100):\n        if item[0] not in list_nr_male100:\n            female_wordcloud_nr_special.append({\'name\': item[0], \'size\': item[1]})\n\n    for item in Counter(female_wordclouds_v).most_common(100):\n        if item[0] not in list_v_male100:\n            female_wordcloud_v_special.append({\'name\': item[0], \'size\': item[1]})\n\n    male_wordcloud_a_special = []\n    male_wordcloud_n_special = []\n    male_wordcloud_nr_special = []\n    male_wordcloud_v_special = []\n\n    for item in Counter(male_wordclouds_a).most_common(100):\n        if item[0] not in list_a_female100:\n            male_wordcloud_a_special.append({\'name\': item[0], \'size\': item[1]})\n\n    for item in Counter(male_wordclouds_n).most_common(100):\n        if item[0] not in list_n_female100:\n            male_wordcloud_n_special.append({\'name\': item[0], \'size\': item[1]})\n\n    for item in Counter(male_wordclouds_nr).most_common(100):\n        if item[0] not in list_nr_female100:\n            male_wordcloud_nr_special.append({\'name\': item[0], \'size\': item[1]})\n\n    for item in Counter(male_wordclouds_v).most_common(100):\n        if item[0] not in list_v_female100:\n            male_wordcloud_v_special.append({\'name\': item[0], \'size\': item[1]})\n\n    flare = {}\n    flare = {"name": "flare", "children": [{"name": "female_wordcloud",\n                                            "children": [{"name": "adj", "children": female_wordcloud_a_special},\n                                                         {"name": "v", "children": female_wordcloud_v_special},\n                                                         {"name": "nr", "children": female_wordcloud_nr_special},\n                                                         {"name": "n", "children": female_wordcloud_n_special}]}]}\n\n    f = open(os.path.join(request.folder,\'private\',\'d3\',\'BestComments_female.json\'), \'w+\')\n    f.write(json.dumps(flare, sort_keys=False, separators=(\',\', \':\'), indent=4))\n    f.close()\n    flare = {}\n    flare = {"name": "flare", "children": [{"name": "male_wordcloud",\n                                            "children": [{"name": "adj", "children": male_wordcloud_a_special},\n                                                         {"name": "v", "children": male_wordcloud_v_special},\n                                                         {"name": "nr", "children": male_wordcloud_nr_special},\n                                                         {"name": "n", "children": male_wordcloud_n_special}]}]}\n    f = open(os.path.join(request.folder,\'private\',\'d3\',\'BestComments_male.json\'), \'w+\')\n    f.write(json.dumps(flare, sort_keys=False, separators=(\',\', \':\'), indent=4))\n    f.close()\n\n    flare = {}\n    flare = {"name": "flare", "children": [{"name": "wordcloud", "children": [{"name": "adj", "children": wordcloud_a},\n                                                                              {"name": "v", "children": wordcloud_v},\n                                                                              {"name": "nr", "children": wordcloud_nr},\n                                                                              {"name": "n", "children": wordcloud_n}]}]}\n    f = open(os.path.join(request.folder,\'private\',\'d3\',\'BestComments.json\'), \'w+\')\n    f.write(json.dumps(flare, sort_keys=False, separators=(\',\', \':\'), indent=4))\n    f.close()\n\n    f = codecs.open(os.path.join(request.folder,\'private\',\'d3\',\'wordcloud.txt\'), \'w+\', \'utf-8\')\n    for item in list(set(p_wordclouds)):\n        f.write(item + \'\\n\')\n    f.close()\n\n    return dict(message="OK")\n    #return len(rows)\n    #return json.dumps(female_wordclouds_nr)\n\ndef ConvertComments():\n    rows = fbdb(fbdb.news_comments.comments <> None).select()  #\n    for row in rows:\n        convertNewsComms(row["fid"])\n\ndef delay():\n    time.sleep(1.5)\n\nresponse._vars=response._caller(test2)\n'
p7
sS'snapshot'
p8
(dp9
S'exception'
p10
(dp11
S'__hash__'
p12
S"<method-wrapper '__hash__' of exceptions.KeyError object>"
p13
sS'__setattr__'
p14
S"<method-wrapper '__setattr__' of exceptions.KeyError object>"
p15
sS'__reduce_ex__'
p16
S'<built-in method __reduce_ex__ of exceptions.KeyError object>'
p17
sS'__getslice__'
p18
S"<method-wrapper '__getslice__' of exceptions.KeyError object>"
p19
sS'__getitem__'
p20
S"<method-wrapper '__getitem__' of exceptions.KeyError object>"
p21
sS'__setstate__'
p22
S'<built-in method __setstate__ of exceptions.KeyError object>'
p23
sS'args'
p24
S"('http://news.rti.org.tw/news/detail/%3FrecordId%3D173507',)"
p25
sS'__reduce__'
p26
S'<built-in method __reduce__ of exceptions.KeyError object>'
p27
sS'__str__'
p28
S"<method-wrapper '__str__' of exceptions.KeyError object>"
p29
sS'__format__'
p30
S'<built-in method __format__ of exceptions.KeyError object>'
p31
sS'__getattribute__'
p32
S"<method-wrapper '__getattribute__' of exceptions.KeyError object>"
p33
sS'__class__'
p34
S"<type 'exceptions.KeyError'>"
p35
sS'__unicode__'
p36
S'<built-in method __unicode__ of exceptions.KeyError object>'
p37
sS'__delattr__'
p38
S"<method-wrapper '__delattr__' of exceptions.KeyError object>"
p39
sS'__subclasshook__'
p40
S'<built-in method __subclasshook__ of type object>'
p41
sS'__repr__'
p42
S"<method-wrapper '__repr__' of exceptions.KeyError object>"
p43
sS'__dict__'
p44
S'{}'
p45
sS'__sizeof__'
p46
S'<built-in method __sizeof__ of exceptions.KeyError object>'
p47
sS'__doc__'
p48
S"'Mapping key not found.'"
p49
sS'__init__'
p50
S"<method-wrapper '__init__' of exceptions.KeyError object>"
p51
sS'__new__'
p52
S'<built-in method __new__ of type object>'
p53
ssS'evalue'
p54
S"'http://news.rti.org.tw/news/detail/%3FrecordId%3D173507'"
p55
sS'request'
p56
cgluon.html
XML_unpickle
p57
(S's\xf4a\x00\x00<div><table><tr><td style="font-weight:bold;vertical-align:top;">ajax</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">application</td><td style="vertical-align:top;">:</td><td><div>fbbrt</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">args</td><td style="vertical-align:top;">:</td><td><div><table></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">cid</td><td style="vertical-align:top;">:</td><td><div>None</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">client</td><td style="vertical-align:top;">:</td><td><div>127.0.0.1</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">controller</td><td style="vertical-align:top;">:</td><td><div>newsAPI</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">cookies</td><td style="vertical-align:top;">:</td><td><div><table><tr><td style="font-weight:bold;vertical-align:top;">session_id_admin</td><td style="vertical-align:top;">:</td><td><div>127.0.0.1-59231e73-010a-440e-89ed-903d6002e790<table><tr><td style="font-weight:bold;vertical-align:top;">comment</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">domain</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">expires</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">httponly</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">max-age</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">path</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">secure</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">version</td><td style="vertical-align:top;">:</td><td><div></div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_id_brt</td><td style="vertical-align:top;">:</td><td><div>127.0.0.1-4e84140c-e4fd-4346-8cc0-15f56105c469<table><tr><td style="font-weight:bold;vertical-align:top;">comment</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">domain</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">expires</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">httponly</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">max-age</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">path</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">secure</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">version</td><td style="vertical-align:top;">:</td><td><div></div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_id_fbbrt</td><td style="vertical-align:top;">:</td><td><div>127.0.0.1-67c97287-622b-4a90-a229-473ada0a2eb9<table><tr><td style="font-weight:bold;vertical-align:top;">comment</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">domain</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">expires</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">httponly</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">max-age</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">path</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">secure</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">version</td><td style="vertical-align:top;">:</td><td><div></div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_id_fsr</td><td style="vertical-align:top;">:</td><td><div>127.0.0.1-6d8b6df8-37f9-42fc-b03f-667ec15a1f28<table><tr><td style="font-weight:bold;vertical-align:top;">comment</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">domain</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">expires</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">httponly</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">max-age</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">path</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">secure</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">version</td><td style="vertical-align:top;">:</td><td><div></div></td></tr></table></div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">env</td><td style="vertical-align:top;">:</td><td><div><table><tr><td style="font-weight:bold;vertical-align:top;">HTTP_ACCEPT</td><td style="vertical-align:top;">:</td><td><div>text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_ACCEPT_ENCODING</td><td style="vertical-align:top;">:</td><td><div>gzip, deflate, sdch</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_ACCEPT_LANGUAGE</td><td style="vertical-align:top;">:</td><td><div>zh-TW,zh;q=0.8,en-US;q=0.6,en;q=0.4</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_CONNECTION</td><td style="vertical-align:top;">:</td><td><div>keep-alive</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_COOKIE</td><td style="vertical-align:top;">:</td><td><div>session_id_fsr=127.0.0.1-6d8b6df8-37f9-42fc-b03f-667ec15a1f28; session_id_brt=127.0.0.1-4e84140c-e4fd-4346-8cc0-15f56105c469; session_id_fbbrt=127.0.0.1-67c97287-622b-4a90-a229-473ada0a2eb9; session_id_admin=127.0.0.1-59231e73-010a-440e-89ed-903d6002e790</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_HOST</td><td style="vertical-align:top;">:</td><td><div>localhost:8088</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_USER_AGENT</td><td style="vertical-align:top;">:</td><td><div>Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/40.0.2214.115 Safari/537.36</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">PATH_INFO</td><td style="vertical-align:top;">:</td><td><div>/fbbrt/newsAPI/test2.html</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">QUERY_STRING</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">REMOTE_ADDR</td><td style="vertical-align:top;">:</td><td><div>127.0.0.1</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">REMOTE_PORT</td><td style="vertical-align:top;">:</td><td><div>50007</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">REQUEST_METHOD</td><td style="vertical-align:top;">:</td><td><div>GET</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">SCRIPT_NAME</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">SERVER_NAME</td><td style="vertical-align:top;">:</td><td><div>maclogair.local</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">SERVER_PORT</td><td style="vertical-align:top;">:</td><td><div>8088</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">SERVER_PROTOCOL</td><td style="vertical-align:top;">:</td><td><div>HTTP/1.1</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">SERVER_SOFTWARE</td><td style="vertical-align:top;">:</td><td><div>Rocket 1.2.6</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">app_folders</td><td style="vertical-align:top;">:</td><td><div>set([&#x27;/Users/logyuan/Documents/web2py/applications/fbbrt/&#x27;, &#x27;/Users/logyuan/Documents/web2py/applications/admin/&#x27;, &#x27;/Users/logyuan/Documents/web2py/applications/welcome/&#x27;])</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">applications_parent</td><td style="vertical-align:top;">:</td><td><div>/Users/logyuan/Documents/web2py</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">cmd_args</td><td style="vertical-align:top;">:</td><td><div><table></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">cmd_options</td><td style="vertical-align:top;">:</td><td><div>&lt;Values at 0x10c7044d0: {&#x27;verbose&#x27;: False, &#x27;ip&#x27;: &#x27;127.0.0.1&#x27;, &#x27;debuglevel&#x27;: 30, &#x27;with_scheduler&#x27;: False, &#x27;ips&#x27;: [&#x27;192.168.2.1&#x27;, &#x27;192.168.4.29&#x27;, &#x27;172.20.10.4&#x27;, &#x27;fe80::40c:ceff:fe3e:b700%bridge0&#x27;, &#x27;fe80::60c:ceff:fee3:df4a%en0&#x27;, &#x27;fe80::34a3:95ff:fec7:ca59%en3&#x27;], &#x27;shutdown_timeout&#x27;: 5, &#x27;taskbar&#x27;: False, &#x27;with_coverage&#x27;: False, &#x27;port&#x27;: 8000, &#x27;maxthreads&#x27;: None, &#x27;softcron&#x27;: False, &#x27;server_name&#x27;: &#x27;maclogair.local&#x27;, &#x27;bpython&#x27;: False, &#x27;nogui&#x27;: False, &#x27;pid_filename&#x27;: &#x27;httpserver.pid&#x27;, &#x27;extcron&#x27;: False, &#x27;runcron&#x27;: False, &#x27;run_system_tests&#x27;: False, &#x27;test&#x27;: None, &#x27;folder&#x27;: &#x27;/Users/logyuan/Documents/web2py&#x27;, &#x27;config&#x27;: &#x27;&#x27;, &#x27;minthreads&#x27;: None, &#x27;shell&#x27;: None, &#x27;run&#x27;: &#x27;&#x27;, &#x27;log_filename&#x27;: &#x27;httpserver.log&#x27;, &#x27;profiler_dir&#x27;: None, &#x27;args&#x27;: [&#x27;&#x27;], &#x27;socket_timeout&#x27;: 5, &#x27;ssl_ca_certificate&#x27;: None, &#x27;scheduler&#x27;: None, &#x27;interfaces&#x27;: None, &#x27;ssl_private_key&#x27;: &#x27;&#x27;, &#x27;scheduler_groups&#x27;: None, &#x27;password&#x27;: &#x27;&lt;ask&gt;&#x27;, &#x27;request_queue_size&#x27;: 5, &#x27;ssl_certificate&#x27;: &#x27;&#x27;, &#x27;cronjob&#x27;: False, &#x27;numthreads&#x27;: None, &#x27;quiet&#x27;: False, &#x27;import_models&#x27;: False, &#x27;timeout&#x27;: 10, &#x27;plain&#x27;: False, &#x27;nobanner&#x27;: False}&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">db_sessions</td><td style="vertical-align:top;">:</td><td><div>set([])</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">debugging</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">gluon_parent</td><td style="vertical-align:top;">:</td><td><div>/Users/logyuan/Documents/web2py</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_accept</td><td style="vertical-align:top;">:</td><td><div>text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_accept_encoding</td><td style="vertical-align:top;">:</td><td><div>gzip, deflate, sdch</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_accept_language</td><td style="vertical-align:top;">:</td><td><div>zh-TW,zh;q=0.8,en-US;q=0.6,en;q=0.4</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_connection</td><td style="vertical-align:top;">:</td><td><div>keep-alive</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_cookie</td><td style="vertical-align:top;">:</td><td><div>session_id_fsr=127.0.0.1-6d8b6df8-37f9-42fc-b03f-667ec15a1f28; session_id_brt=127.0.0.1-4e84140c-e4fd-4346-8cc0-15f56105c469; session_id_fbbrt=127.0.0.1-67c97287-622b-4a90-a229-473ada0a2eb9; session_id_admin=127.0.0.1-59231e73-010a-440e-89ed-903d6002e790</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_host</td><td style="vertical-align:top;">:</td><td><div>localhost:8088</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_user_agent</td><td style="vertical-align:top;">:</td><td><div>Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/40.0.2214.115 Safari/537.36</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_jython</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_pypy</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_source</td><td style="vertical-align:top;">:</td><td><div>True</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">local_hosts</td><td style="vertical-align:top;">:</td><td><div><table><tr><td><div>192.168.2.1</div></td></tr><tr><td><div>192.168.4.29</div></td></tr><tr><td><div>172.20.10.4</div></td></tr><tr><td><div>::ffff:127.0.0.1</div></td></tr><tr><td><div>::1</div></td></tr><tr><td><div>fe80::60c:ceff:fee3:df4a%en0</div></td></tr><tr><td><div>fe80::40c:ceff:fe3e:b700%bridge0</div></td></tr><tr><td><div>maclogair.local</div></td></tr><tr><td><div>fe80::34a3:95ff:fec7:ca59%en3</div></td></tr><tr><td><div>127.0.0.1</div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">path_info</td><td style="vertical-align:top;">:</td><td><div>/fbbrt/newsAPI/test2.html</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">query_string</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">remote_addr</td><td style="vertical-align:top;">:</td><td><div>127.0.0.1</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">remote_port</td><td style="vertical-align:top;">:</td><td><div>50007</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">request_method</td><td style="vertical-align:top;">:</td><td><div>GET</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">request_uri</td><td style="vertical-align:top;">:</td><td><div>/fbbrt/newsAPI/test2.html</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">script_name</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">server_name</td><td style="vertical-align:top;">:</td><td><div>maclogair.local</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">server_port</td><td style="vertical-align:top;">:</td><td><div>8088</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">server_protocol</td><td style="vertical-align:top;">:</td><td><div>HTTP/1.1</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">server_software</td><td style="vertical-align:top;">:</td><td><div>Rocket 1.2.6</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">web2py_path</td><td style="vertical-align:top;">:</td><td><div>/Users/logyuan/Documents/web2py</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">web2py_version</td><td style="vertical-align:top;">:</td><td><div>2.9.5-stable+timestamp.2014.03.20.22.57.13</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi.errors</td><td style="vertical-align:top;">:</td><td><div>&lt;open file &#x27;&lt;stderr&gt;&#x27;, mode &#x27;w&#x27; at 0x10b31b1e0&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi.file_wrapper</td><td style="vertical-align:top;">:</td><td><div>&lt;class wsgiref.util.FileWrapper at 0x10c68d870&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi.input</td><td style="vertical-align:top;">:</td><td><div>&lt;socket._fileobject object at 0x159b1d750&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi.multiprocess</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi.multithread</td><td style="vertical-align:top;">:</td><td><div>True</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi.run_once</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi.url_scheme</td><td style="vertical-align:top;">:</td><td><div>http</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi.version</td><td style="vertical-align:top;">:</td><td><div><table><tr><td><div>1</div></td></tr><tr><td><div>0</div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi_errors</td><td style="vertical-align:top;">:</td><td><div>&lt;open file &#x27;&lt;stderr&gt;&#x27;, mode &#x27;w&#x27; at 0x10b31b1e0&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi_file_wrapper</td><td style="vertical-align:top;">:</td><td><div>&lt;class wsgiref.util.FileWrapper at 0x10c68d870&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi_input</td><td style="vertical-align:top;">:</td><td><div>&lt;socket._fileobject object at 0x159b1d750&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi_multiprocess</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi_multithread</td><td style="vertical-align:top;">:</td><td><div>True</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi_run_once</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi_url_scheme</td><td style="vertical-align:top;">:</td><td><div>http</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi_version</td><td style="vertical-align:top;">:</td><td><div><table><tr><td><div>1</div></td></tr><tr><td><div>0</div></td></tr></table></div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">extension</td><td style="vertical-align:top;">:</td><td><div>html</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">folder</td><td style="vertical-align:top;">:</td><td><div>/Users/logyuan/Documents/web2py/applications/fbbrt/</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">function</td><td style="vertical-align:top;">:</td><td><div>test2</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">global_settings</td><td style="vertical-align:top;">:</td><td><div><table><tr><td style="font-weight:bold;vertical-align:top;">app_folders</td><td style="vertical-align:top;">:</td><td><div>set([&#x27;/Users/logyuan/Documents/web2py/applications/fbbrt/&#x27;, &#x27;/Users/logyuan/Documents/web2py/applications/admin/&#x27;, &#x27;/Users/logyuan/Documents/web2py/applications/welcome/&#x27;])</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">applications_parent</td><td style="vertical-align:top;">:</td><td><div>/Users/logyuan/Documents/web2py</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">cmd_args</td><td style="vertical-align:top;">:</td><td><div><table></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">cmd_options</td><td style="vertical-align:top;">:</td><td><div>&lt;Values at 0x10c7044d0: {&#x27;verbose&#x27;: False, &#x27;ip&#x27;: &#x27;127.0.0.1&#x27;, &#x27;debuglevel&#x27;: 30, &#x27;with_scheduler&#x27;: False, &#x27;ips&#x27;: [&#x27;192.168.2.1&#x27;, &#x27;192.168.4.29&#x27;, &#x27;172.20.10.4&#x27;, &#x27;fe80::40c:ceff:fe3e:b700%bridge0&#x27;, &#x27;fe80::60c:ceff:fee3:df4a%en0&#x27;, &#x27;fe80::34a3:95ff:fec7:ca59%en3&#x27;], &#x27;shutdown_timeout&#x27;: 5, &#x27;taskbar&#x27;: False, &#x27;with_coverage&#x27;: False, &#x27;port&#x27;: 8000, &#x27;maxthreads&#x27;: None, &#x27;softcron&#x27;: False, &#x27;server_name&#x27;: &#x27;maclogair.local&#x27;, &#x27;bpython&#x27;: False, &#x27;nogui&#x27;: False, &#x27;pid_filename&#x27;: &#x27;httpserver.pid&#x27;, &#x27;extcron&#x27;: False, &#x27;runcron&#x27;: False, &#x27;run_system_tests&#x27;: False, &#x27;test&#x27;: None, &#x27;folder&#x27;: &#x27;/Users/logyuan/Documents/web2py&#x27;, &#x27;config&#x27;: &#x27;&#x27;, &#x27;minthreads&#x27;: None, &#x27;shell&#x27;: None, &#x27;run&#x27;: &#x27;&#x27;, &#x27;log_filename&#x27;: &#x27;httpserver.log&#x27;, &#x27;profiler_dir&#x27;: None, &#x27;args&#x27;: [&#x27;&#x27;], &#x27;socket_timeout&#x27;: 5, &#x27;ssl_ca_certificate&#x27;: None, &#x27;scheduler&#x27;: None, &#x27;interfaces&#x27;: None, &#x27;ssl_private_key&#x27;: &#x27;&#x27;, &#x27;scheduler_groups&#x27;: None, &#x27;password&#x27;: &#x27;&lt;ask&gt;&#x27;, &#x27;request_queue_size&#x27;: 5, &#x27;ssl_certificate&#x27;: &#x27;&#x27;, &#x27;cronjob&#x27;: False, &#x27;numthreads&#x27;: None, &#x27;quiet&#x27;: False, &#x27;import_models&#x27;: False, &#x27;timeout&#x27;: 10, &#x27;plain&#x27;: False, &#x27;nobanner&#x27;: False}&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">db_sessions</td><td style="vertical-align:top;">:</td><td><div>set([])</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">debugging</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">gluon_parent</td><td style="vertical-align:top;">:</td><td><div>/Users/logyuan/Documents/web2py</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_jython</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_pypy</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_source</td><td style="vertical-align:top;">:</td><td><div>True</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">local_hosts</td><td style="vertical-align:top;">:</td><td><div><table><tr><td><div>192.168.2.1</div></td></tr><tr><td><div>192.168.4.29</div></td></tr><tr><td><div>172.20.10.4</div></td></tr><tr><td><div>::ffff:127.0.0.1</div></td></tr><tr><td><div>::1</div></td></tr><tr><td><div>fe80::60c:ceff:fee3:df4a%en0</div></td></tr><tr><td><div>fe80::40c:ceff:fe3e:b700%bridge0</div></td></tr><tr><td><div>maclogair.local</div></td></tr><tr><td><div>fe80::34a3:95ff:fec7:ca59%en3</div></td></tr><tr><td><div>127.0.0.1</div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">web2py_version</td><td style="vertical-align:top;">:</td><td><div>2.9.5-stable+timestamp.2014.03.20.22.57.13</div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_https</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_local</td><td style="vertical-align:top;">:</td><td><div>True</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_restful</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">now</td><td style="vertical-align:top;">:</td><td><div>datetime.datetime(2015, 3, 4, 11, 53, 30, 474807)</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">raw_args</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">raw_extension</td><td style="vertical-align:top;">:</td><td><div>html</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">url</td><td style="vertical-align:top;">:</td><td><div>/fbbrt/newsAPI/test2.html</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">utcnow</td><td style="vertical-align:top;">:</td><td><div>datetime.datetime(2015, 3, 4, 3, 53, 30, 474836)</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">uuid</td><td style="vertical-align:top;">:</td><td><div>fbbrt/127.0.0.1.2015-03-04.11-53-30.b97f938e-e723-4f88-abfc-e4dafdee1a9c</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi</td><td style="vertical-align:top;">:</td><td><div>&lt;gluon.main.LazyWSGI object at 0x16284df10&gt;</div></td></tr></table></div>'
tRp58
sS'frames'
p59
(lp60
(dp61
S'file'
p62
S'/Users/logyuan/Documents/web2py/gluon/restricted.py'
p63
sS'dump'
p64
(dp65
S'environment'
p66
S"{'A': <class 'gluon.html.A'>, 'ANY_OF': <class 'gluon.validators.ANY_OF'>, 'Auth': <class 'gluon.tools.Auth'>, 'B': <class 'gluon.html.B'>, 'BEAUTIFY': <class 'gluon.html.BEAUTIFY'>, 'BODY': <class 'gluon.html.BODY'>, 'BR': <class 'gluon.html.BR'>, 'BUTTON': <class 'gluon.html.BUTTON'>, 'BestComments': <function BestComments>, 'CAT': <class 'gluon.html.CAT'>, ...}"
p67
sS'ccode'
p68
S'<code object <module> at 0x159257ab0, file "/Use...plications/fbbrt/controllers/newsAPI.py", line 3>'
p69
ssS'lnum'
p70
I220
sS'lines'
p71
(dp72
I224
S'        # do not encapsulate (obfuscate) the original RestrictedError'
p73
sI215
S'    try:'
p74
sI216
S'        if isinstance(code, types.CodeType):'
p75
sI217
S'            ccode = code'
p76
sI218
S'        else:'
p77
sI219
S'            ccode = compile2(code, layer)'
p78
sI220
S'        exec ccode in environment'
p79
sI221
S'    except HTTP:'
p80
sI222
S'        raise'
p81
sI223
S'    except RestrictedError:'
p82
ssS'call'
p83
S"(code='# coding: utf8\\n# try something like\\nimport urlli...eep(1.5)\\n\\nresponse._vars=response._caller(test2)\\n', environment={'A': <class 'gluon.html.A'>, 'ANY_OF': <class 'gluon.validators.ANY_OF'>, 'Auth': <class 'gluon.tools.Auth'>, 'B': <class 'gluon.html.B'>, 'BEAUTIFY': <class 'gluon.html.BEAUTIFY'>, 'BODY': <class 'gluon.html.BODY'>, 'BR': <class 'gluon.html.BR'>, 'BUTTON': <class 'gluon.html.BUTTON'>, 'BestComments': <function BestComments>, 'CAT': <class 'gluon.html.CAT'>, ...}, layer='/Users/logyuan/Documents/web2py/applications/fbbrt/controllers/newsAPI.py')"
p84
sS'func'
p85
S'restricted'
p86
sa(dp87
g62
S'/Users/logyuan/Documents/web2py/applications/fbbrt/controllers/newsAPI.py'
p88
sg64
(dp89
sg70
I534
sg71
(dp90
I523
S'    #return len(rows)'
p91
sI524
S'    #return json.dumps(female_wordclouds_nr)'
p92
sI525
S''
sI526
S'def ConvertComments():'
p93
sI527
S'    rows = fbdb(fbdb.news_comments.comments <> None).select()  #'
p94
sI528
S'    for row in rows:'
p95
sI529
S'        convertNewsComms(row["fid"])'
p96
sI530
S''
sI531
S'def delay():'
p97
sI532
S'    time.sleep(1.5)'
p98
ssg83
S'()'
p99
sg85
S'<module>'
p100
sa(dp101
g62
S'/Users/logyuan/Documents/web2py/gluon/globals.py'
p102
sg64
(dp103
S'self'
p104
S'undefined'
p105
sS'f'
S'<function test2>'
p106
ssg70
I385
sg71
(dp107
I384
S'        self._vars = None'
p108
sI385
S'        self._caller = lambda f: f()'
p109
sI386
S'        self._view_environment = None'
p110
sI387
S'        self._custom_commit = None'
p111
sI388
S'        self._custom_rollback = None'
p112
sI389
S''
sI380
S'        self.menu = []             # used by the default view layout'
p113
sI381
S'        self.files = []            # used by web2py_ajax.html'
p114
sI382
S'        self.generic_patterns = []  # patterns to allow generic views'
p115
sI383
S"        self.delimiters = ('{{', '}}')"
p116
ssg83
S'(f=<function test2>)'
p117
sg85
S'<lambda>'
p118
sa(dp119
g62
S'/Users/logyuan/Documents/web2py/applications/fbbrt/controllers/newsAPI.py'
p120
sg64
(dp121
S'newsbrt.updateAllSocialCount'
p122
S'<bound method NewsGroup.updateAllSocialCount of <__restricted__.NewsGroup instance>>'
p123
sS'newsbrt'
p124
S'<__restricted__.NewsGroup instance>'
p125
ssg70
I102
sg71
(dp126
I97
S"    #return response.json(get_og_url('http://news.ltn.com.tw/news/opinion/breakingnews/1222089'))"
p127
sI98
S''
sI99
S'def test2():'
p128
sI100
S'    started_time = datetime.datetime.now()'
p129
sI101
S"    newsbrt = NewsGroup('BRT')"
p130
sI102
S'    newsbrt.updateAllSocialCount()'
p131
sI103
S'    ended_time = datetime.datetime.now()'
p132
sI104
S"    fbdb.event_logs.insert(function='updateAllSocialCount', started_time=started_time, ended_time=ended_time)"
p133
sI105
S'    fbdb.commit()'
p134
sI106
S''
ssg83
S'()'
p135
sg85
S'test2'
p136
sa(dp137
g62
S'/Users/logyuan/Documents/web2py/applications/fbbrt/models/graph.py'
p138
sg64
(dp139
S'global getGroupUrlsSocialCount'
p140
S'<function getGroupUrlsSocialCount>'
p141
sS'urls'
p142
S"'http://www.chinatimes.com/newspapers/20150225000...7%9A%E5%85%AC%E8%BB%8A%E5%8F%AF%E5%89%8D%E5%BE%80'"
p143
ssg70
I595
sg71
(dp144
I590
S''
sI591
S'    def updateAllSocialCount(self):'
p145
sI592
S"        urls = ''"
p146
sI593
S'        for url in self.urls_list:'
p147
sI594
S"            if len(urls.split(',')) >=10:"
p148
sI595
S'                getGroupUrlsSocialCount(urls)'
p149
sI596
S"                urls = ''"
p150
sI597
S'            urls = urls + \',\' + url["href"] if len(urls) <> 0 else url["href"]'
p151
sI598
S'        getGroupUrlsSocialCount(urls)'
p152
sI599
S''
ssg83
S'(self=<__restricted__.NewsGroup instance>)'
p153
sg85
S'updateAllSocialCount'
p154
sa(dp155
g62
S'/Users/logyuan/Documents/web2py/gluon/tools.py'
p156
sg64
(dp157
S'action'
p158
S'<function getGroupUrlsSocialCount>'
p159
sS'a'
S"('http://www.chinatimes.com/newspapers/20150225000...7%9A%E5%85%AC%E8%BB%8A%E5%8F%AF%E5%89%8D%E5%BE%80',)"
p160
sS'b'
g45
ssg70
I3287
sg71
(dp161
I3282
S'                    flag = condition'
p162
sI3283
S'                if not flag:'
p163
sI3284
S'                    current.session.flash = self.messages.access_denied'
p164
sI3285
S'                    return call_or_redirect('
p165
sI3286
S'                        self.settings.on_failed_authorization)'
p166
sI3287
S'                return action(*a, **b)'
p167
sI3288
S'            f.__doc__ = action.__doc__'
p168
sI3289
S'            f.__name__ = action.__name__'
p169
sI3290
S'            f.__dict__.update(action.__dict__)'
p170
sI3291
S'            return f'
p171
ssg83
S"(*a=('http://www.chinatimes.com/newspapers/20150225000...7%9A%E5%85%AC%E8%BB%8A%E5%8F%AF%E5%89%8D%E5%BE%80',), **b={})"
p172
sg85
S'f'
sa(dp173
g62
S'/Users/logyuan/Documents/web2py/applications/fbbrt/models/graph.py'
p174
sg64
(dp175
S'urls'
p176
S"'http://www.chinatimes.com/newspapers/20150225000...7%9A%E5%85%AC%E8%BB%8A%E5%8F%AF%E5%89%8D%E5%BE%80'"
p177
sS'global get_og_urls'
p178
S'<function get_og_urls>'
p179
sS'ogs'
p180
g105
ssg70
I1756
sg71
(dp181
I1760
S'        comment_count = og["comment_count"]'
p182
sI1751
S'@auth.requires_login()'
p183
sI1752
S'def getGroupUrlsSocialCount(urls):'
p184
sI1753
S"    updated_time_utc = datetime.datetime.utcnow().strftime('%Y-%m-%dT%H:%M:%S+0000') #use utcnow for all purposes"
p185
sI1754
S"    updated_time_utc = datetime.datetime.strptime(updated_time_utc,'%Y-%m-%dT%H:%M:%S+0000')"
p186
sI1755
S'    updated_time_tw = updated_time_utc + timedelta(hours=8)'
p187
sI1756
S'    ogs = get_og_urls(urls)'
p188
sI1757
S'    for og in ogs:'
p189
sI1758
S'        fid = og["fid"]'
p190
sI1759
S'        share_count = og["share_count"]'
p191
ssg83
S"(urls='http://www.chinatimes.com/newspapers/20150225000...7%9A%E5%85%AC%E8%BB%8A%E5%8F%AF%E5%89%8D%E5%BE%80')"
p192
sg85
S'getGroupUrlsSocialCount'
p193
sa(dp194
g62
S'/Users/logyuan/Documents/web2py/gluon/tools.py'
p195
sg64
(dp196
S'action'
p197
S'<function get_og_urls>'
p198
sS'a'
S"('http://www.chinatimes.com/newspapers/20150225000...7%9A%E5%85%AC%E8%BB%8A%E5%8F%AF%E5%89%8D%E5%BE%80',)"
p199
sS'b'
g45
ssg70
I3287
sg71
(dp200
I3282
S'                    flag = condition'
p201
sI3283
S'                if not flag:'
p202
sI3284
S'                    current.session.flash = self.messages.access_denied'
p203
sI3285
S'                    return call_or_redirect('
p204
sI3286
S'                        self.settings.on_failed_authorization)'
p205
sI3287
S'                return action(*a, **b)'
p206
sI3288
S'            f.__doc__ = action.__doc__'
p207
sI3289
S'            f.__name__ = action.__name__'
p208
sI3290
S'            f.__dict__.update(action.__dict__)'
p209
sI3291
S'            return f'
p210
ssg83
S"(*a=('http://www.chinatimes.com/newspapers/20150225000...7%9A%E5%85%AC%E8%BB%8A%E5%8F%AF%E5%89%8D%E5%BE%80',), **b={})"
p211
sg85
S'f'
sa(dp212
g62
S'/Users/logyuan/Documents/web2py/applications/fbbrt/models/graph.py'
p213
sg64
(dp214
S'url'
p215
S"'http://news.rti.org.tw/news/detail/%3FrecordId%3D173507'"
p216
sS'builtinNone'
p217
S'None'
p218
sS'result'
p219
S"{'http://n.yam.com/taiwanhot/place/20150224/20150224882363.html': {'id': 'http://n.yam.com/taiwanhot/place/20150224/20150224882363.html', 'og_object': {'created_time': '2015-02-24T15:24:38+0000', 'description': u'\\u300c\\u5927\\u5e74\\u521d\\u516d\\u958b\\u5de5\\u65...3bb\\u5e74\\u516b\\u6708\\u52d5\\u5de5\\u5f8c\\uff0c...', 'id': '858567924189841', 'title': u'\\u6771\\u52e2\\u8c50\\u539f\\u751f\\u6d3b\\u5708\\u90...\\u3000\\u6771\\u52e2\\u4eba\\u6297\\u8b70\\u6012\\u543c', 'type': 'article', 'updated_time': '2015-02-25T16:09:27+0000', 'url': 'http://n.yam.com/taiwanhot/place/20150224/20150224882363.html'}, 'share': {'comment_count': 0, 'share_count': 67}}, 'http://n.yam.com/udn/life/20150212/20150212866859.html': {'id': 'http://n.yam.com/udn/life/20150212/20150212866859.html', 'og_object': {'created_time': '2015-02-11T23:27:39+0000', 'description': u'\\u4e2d\\u5e02\\u77e5\\u540d\\u7684BRT\\u96d9\\u7bc0\\...05e\\u554f\\uff0c\\u7db2\\u53cb\\u8b4f\\u8af7\\u56e0...', 'id': '1016340705062516', 'title': u'\\u626f\\uff01\\u53f0\\u4e2dBRT\\u7ad9\\u516c\\u5730 \\u6709\\u4eba\\u7a2e\\u83dc', 'type': 'article', 'updated_time': '2015-02-23T19:55:43+0000', 'url': 'http://n.yam.com/udn/life/20150212/20150212866859.html'}, 'share': {'comment_count': 1, 'share_count': 7}}, 'http://news.ltn.com.tw/news/focus/paper/857243': {'id': 'http://news.ltn.com.tw/news/focus/paper/857243', 'og_object': {'created_time': '2015-02-20T22:01:29+0000', 'description': u'\\u300c\\u4eca\\u5e74\\uff0c\\u662f\\u53f0\\u4e2d\\u88...\\u5eff\\u4e00\\u842c\\u7968\\u7684\\u7d00\\u9304\\u3002', 'id': '867848656611655', 'title': u'\\u81ea\\u7531\\u4e4b\\u661f\\uff0f\\u6797\\u4f73\\u9f...ede - \\u81ea\\u7531\\u6642\\u5831\\u96fb\\u5b50\\u5831', 'type': 'article', 'updated_time': '2015-03-03T12:29:51+0000', 'url': 'http://news.ltn.com.tw/news/focus/paper/857243'}, 'share': {'comment_count': 0, 'share_count': 14}}, 'http://news.rti.org.tw/news/detail/?recordId=173507': {'id': 'http://news.rti.org.tw/news/detail/?recordId=173507', 'og_object': {'created_time': '2015-02-25T18:46:25+0000', 'id': '955493124462141', 'type': 'website', 'updated_time': '2015-02-25T18:46:25+0000', 'url': 'http://news.rti.org.tw/news/detail/%3FrecordId%3D173507'}, 'share': {'comment_count': 0, 'share_count': 0}}, 'http://www.chinatimes.com/newspapers/20150223000068-260210': {'id': 'http://www.chinatimes.com/newspapers/20150223000068-260210', 'og_object': {'created_time': '2015-02-22T20:09:43+0000', 'description': u'\\u653f\\u5e9c\\u6301\\u7e8c\\u6253\\u623f\\u5f71\\u97...\\u65cf\\u8207\\u9996\\u8cfc\\u65cf\\u9752\\u775e\\u3002', 'id': '848611578530771', 'title': u'\\u53f0\\u4e2d\\u623f\\u5e02 \\u81ea\\u4f4f\\u8cb7\\u76e4\\u652f\\u6490 - \\u4e2d\\u6642\\u96fb\\u5b50\\u5831', 'type': 'website', 'updated_time': '2015-02-23T19:55:11+0000', 'url': 'http://www.chinatimes.com/newspapers/20150223000068-260210'}, 'share': {'comment_count': 0, 'share_count': 89}}, 'http://www.chinatimes.com/newspapers/20150225000564-260107': {'id': 'http://www.chinatimes.com/newspapers/20150225000564-260107', 'og_object': {'created_time': '2015-02-24T20:10:46+0000', 'description': u'\\u53f0\\u4e2d\\u5e02\\u767c\\u5c55\\u89c0\\u5149\\u97...\\u534a\\u5e74\\u5ea6\\u6b63\\u5f0f\\u4e0a\\u8def\\u3002', 'id': '801878563201141', 'title': u'\\u6a5f\\u5834\\u5230\\u5e02\\u5340\\u5feb\\u6377\\u5d...c07\\u8abf\\u6574 - \\u4e2d\\u6642\\u96fb\\u5b50\\u5831', 'type': 'website', 'updated_time': '2015-02-25T21:00:32+0000', 'url': 'http://www.chinatimes.com/newspapers/20150225000564-260107'}, 'share': {'comment_count': 0, 'share_count': 0}}, 'http://www.chinatimes.com/realtimenews/20150223002434-260405': {'id': 'http://www.chinatimes.com/realtimenews/20150223002434-260405', 'og_object': {'created_time': '2015-02-23T09:12:13+0000', 'description': u'104\\u5e74\\u53f0\\u7063\\u71c8\\u6703\\u79fb\\u5e2b\\...\\u7279\\u5b9a\\u5340\\u6b63\\u5f0f\\u9ede\\u71c8\\u3002', 'id': '671626006281598', 'title': u'\\u53f0\\u7063\\u71c8\\u6703\\u79fb\\u5e2b\\u53f0\\u4e...97d\\u8cde\\u71c8 - \\u4e2d\\u6642\\u96fb\\u5b50\\u5831', 'type': 'website', 'updated_time': '2015-03-03T01:03:17+0000', 'url': 'http://www.chinatimes.com/realtimenews/20150223002434-260405'}, 'share': {'comment_count': 0, 'share_count': 1525}}, 'http://www.chinatimes.com/realtimenews/20150224003717-260405': {'id': 'http://www.chinatimes.com/realtimenews/20150224003717-260405', 'og_object': {'created_time': '2015-02-24T10:42:42+0000', 'description': u'\\u767c\\u5c55\\u89c0\\u5149\\u9760\\u4ea4\\u901a\\uff...\\u534a\\u5e74\\u5ea6\\u6b63\\u5f0f\\u4e0a\\u8def\\u3002', 'id': '794438463980614', 'title': u'\\u6e05\\u6cc9\\u5d17\\u6a5f\\u5834\\u5df4\\u58eb\\u4e...574\\u8def\\u7dda - \\u4e2d\\u6642\\u96fb\\u5b50\\u5831', 'type': 'website', 'updated_time': '2015-02-25T16:09:41+0000', 'url': 'http://www.chinatimes.com/realtimenews/20150224003717-260405'}, 'share': {'comment_count': 0, 'share_count': 40}}, 'http://www.times-bignews.com/news/26483/%E5%8F%B...7%9A%E5%85%AC%E8%BB%8A%E5%8F%AF%E5%89%8D%E5%BE%80': {'id': 'http://www.times-bignews.com/news/26483/%E5%8F%B...7%9A%E5%85%AC%E8%BB%8A%E5%8F%AF%E5%89%8D%E5%BE%80', 'og_object': {'created_time': '2015-02-19T02:13:00+0000', 'description': u'\\u53f0\\u4e2d\\uff0f\\u70ba\\u56e0\\u61c9\\u70ba\\u67...\\u6062\\u5fa9\\u539f\\u670d\\u52d9\\u73ed\\u6b21\\u3002', 'id': '719023854863317', 'title': u'\\u53f0\\u4e2d\\uff0f\\u5927\\u7532\\u93ae\\u703e\\u5bae\\u300014\\u7dda\\u516c\\u8eca\\u53ef\\u524d\\u5f80', 'type': 'article', 'updated_time': '2015-02-25T18:46:32+0000', 'url': 'http://www.times-bignews.com/news/26483/%E5%8F%B...7%9A%E5%85%AC%E8%BB%8A%E5%8F%AF%E5%89%8D%E5%BE%80'}, 'share': {'comment_count': 0, 'share_count': 0}}, 'https://video.udn.com/news/280186': {'id': 'https://video.udn.com/news/280186', 'og_object': {'created_time': '2015-02-23T15:24:03+0000', 'description': u'2015\\u53f0\\u7063\\u71c8\\u6703\\u79fb\\u5e2b\\u53f0...90e8\\u8207\\u53f0\\u4e2d\\u5e02\\u653f\\u5e9c\\u5df2..', 'id': '1026388484055990', 'title': u'2015\\u71c8\\u6703\\u5728\\u53f0\\u4e2d \\u9ad8\\u943...3f0\\u9435\\u589e\\u73ed | \\u806f\\u5408\\u5f71\\u97f3', 'type': 'article', 'updated_time': '2015-02-23T19:55:05+0000', 'url': 'https://video.udn.com/news/280186'}, 'share': {'comment_count': 0, 'share_count': 0}}}"
p220
sS'fid'
p221
S"'794438463980614'"
p222
ssg70
I1530
sg71
(dp223
I1525
S'    delay()'
p224
sI1526
S'    ogs=[]'
p225
sI1527
S'    for url in url_list:'
p226
sI1528
S'        try:'
p227
sI1529
S'            url = url.split("://")[0] + "://" + urllib.quote(url.split("://")[1])'
p228
sI1530
S'            fid = result[url]["og_object"]["id"] if \'og_object\' in result[url] else None'
p229
sI1531
S'            fb_url = result[url]["og_object"]["url"] if \'og_object\' in result[url] else None'
p230
sI1532
S'            created_time = datetime.datetime.strptime(result[url]["og_object"]["created_time"],\'%Y-%m-%dT%H:%M:%S+0000\') if \'created_time\' in result[url]["og_object"] else None'
p231
sI1533
S'            updated_time = datetime.datetime.strptime(result[url]["og_object"]["updated_time"],\'%Y-%m-%dT%H:%M:%S+0000\') if \'updated_time\' in result[url]["og_object"] else None'
p232
sI1534
S'            updated_time_tw = updated_time + timedelta(hours=8) if updated_time else None'
p233
ssg83
S"(urls='http://www.chinatimes.com/newspapers/20150225000...7%9A%E5%85%AC%E8%BB%8A%E5%8F%AF%E5%89%8D%E5%BE%80')"
p234
sg85
S'get_og_urls'
p235
sasS'pyver'
p236
S'Python 2.7.7: /usr/local/opt/python/bin/python2.7 (prefix: /usr/local/Cellar/python/2.7.7_1/Frameworks/Python.framework/Versions/2.7)'
p237
sS'session'
p238
g57
(S's\xa5\x0b\x00\x00<div><table><tr><td style="font-weight:bold;vertical-align:top;">auth</td><td style="vertical-align:top;">:</td><td><div><table><tr><td style="font-weight:bold;vertical-align:top;">expiration</td><td style="vertical-align:top;">:</td><td><div>3600</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">hmac_key</td><td style="vertical-align:top;">:</td><td><div>95f76de7-b058-4d0e-801e-ad8316e768de</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">last_visit</td><td style="vertical-align:top;">:</td><td><div>datetime.datetime(2015, 3, 4, 11, 53, 30, 474807)</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">remember</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">user</td><td style="vertical-align:top;">:</td><td><div><table><tr><td style="font-weight:bold;vertical-align:top;">first_name</td><td style="vertical-align:top;">:</td><td><div>Chih-Yuan</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">id</td><td style="vertical-align:top;">:</td><td><div>5L</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">last_name</td><td style="vertical-align:top;">:</td><td><div>Chen</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">registration_id</td><td style="vertical-align:top;">:</td><td><div>10152723143866527</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">registration_key</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">username</td><td style="vertical-align:top;">:</td><td><div>10152723143866527</div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">user_groups</td><td style="vertical-align:top;">:</td><td><div><table><tr><td style="font-weight:bold;vertical-align:top;">5</td><td style="vertical-align:top;">:</td><td><div>user_5</div></td></tr></table></div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">flash</td><td style="vertical-align:top;">:</td><td><div>None</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">redirect_uri</td><td style="vertical-align:top;">:</td><td><div>http://localhost:8088/fbbrt/default/user/login</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">token</td><td style="vertical-align:top;">:</td><td><div><table><tr><td style="font-weight:bold;vertical-align:top;">access_token</td><td style="vertical-align:top;">:</td><td><div>CAAPXPqLzG54BAHkY3ZAbba3k4o012BvGZClZCBgdx7yewyB970uLYUOZAlOuIN1taXYFXeNX6s5OBjMV7wZBsE0djK7giZACfcuyDZCAaeXMHjlFWUmTovMPCfwgGxlRBn7jLZBAuV0oAZB5GPeUPLNFPyZBoZCru7fbe9cLDuBIVIjzyZBVtk8xYHZCyAn5TRL4G8srGiTMru7mZCni3h9hXjkDQ7</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">expires</td><td style="vertical-align:top;">:</td><td><div>1430570665.924242</div></td></tr></table></div></td></tr></table></div>'
tRp239
sS'etype'
p240
S"<type 'exceptions.KeyError'>"
p241
sS'date'
p242
S'Wed Mar  4 11:53:39 2015'
p243
sS'response'
p244
g57
(S's\x97#\x00\x00<div><table><tr><td style="font-weight:bold;vertical-align:top;">body</td><td style="vertical-align:top;">:</td><td><div>&lt;cStringIO.StringO object at 0x161ed09d0&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">cookies</td><td style="vertical-align:top;">:</td><td><div><table><tr><td style="font-weight:bold;vertical-align:top;">session_id_fbbrt</td><td style="vertical-align:top;">:</td><td><div>127.0.0.1-67c97287-622b-4a90-a229-473ada0a2eb9<table><tr><td style="font-weight:bold;vertical-align:top;">comment</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">domain</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">expires</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">httponly</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">max-age</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">path</td><td style="vertical-align:top;">:</td><td><div>/</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">secure</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">version</td><td style="vertical-align:top;">:</td><td><div></div></td></tr></table></div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">delimiters</td><td style="vertical-align:top;">:</td><td><div><table><tr><td><div>{{</div></td></tr><tr><td><div>}}</div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">files</td><td style="vertical-align:top;">:</td><td><div><table></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">flash</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">generic_patterns</td><td style="vertical-align:top;">:</td><td><div><table></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">google_analytics_id</td><td style="vertical-align:top;">:</td><td><div>None</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">headers</td><td style="vertical-align:top;">:</td><td><div><table><tr><td style="font-weight:bold;vertical-align:top;">X-Powered-By</td><td style="vertical-align:top;">:</td><td><div>web2py</div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">logo</td><td style="vertical-align:top;">:</td><td><div><a class="brand" href="http://www.web2py.com/"><b>web<span>2</span>py</b>&trade;&nbsp;</a></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">menu</td><td style="vertical-align:top;">:</td><td><div><table><tr><td><div><table><tr><td><div>BRT\xe6\x96\xb0\xe8\x81\x9e</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>/fbbrt/default/display_news</div></td></tr><tr><td><div><table><tr><td><div><table><tr><td><div>\xe5\x8d\xb3\xe6\x99\x82\xe6\x96\xb0\xe8\x81\x9e</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>/fbbrt/default/realtime_news</div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>\xe6\x9c\xac\xe9\x80\xb1\xe6\x9c\x80\xe7\x86\xb1\xe9\x96\x80</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>/fbbrt/default/Hottest_news</div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>\xe6\xad\xb7\xe5\x8f\xb2\xe6\x96\xb0\xe8\x81\x9e\xe6\x8e\x92\xe5\x90\x8d</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>/fbbrt/default/History_news</div></td></tr></table></div></td></tr></table></div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>\xe7\xb6\xb2\xe5\x8f\x8b</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>/fbbrt/default/display_people</div></td></tr><tr><td><div><table><tr><td><div><table><tr><td><div>\xe6\x9c\x80\xe6\x96\xb0\xe5\x9b\x9e\xe8\xa6\x86</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>/fbbrt/default/addPeople</div></td></tr></table></div></td></tr></table></div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>Page</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>/fbbrt/default/display_page</div></td></tr><tr><td><div><table><tr><td><div><table><tr><td><div>Page Count</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>/fbbrt/default/index</div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>Add Page</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>/fbbrt/default/addPage</div></td></tr></table></div></td></tr></table></div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>Post</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>/fbbrt/default/display_post</div></td></tr><tr><td><div><table><tr><td><div><table><tr><td><div>Add Post</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>/fbbrt/default/addpost</div></td></tr></table></div></td></tr></table></div></td></tr></table></div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">meta</td><td style="vertical-align:top;">:</td><td><div><table><tr><td style="font-weight:bold;vertical-align:top;">author</td><td style="vertical-align:top;">:</td><td><div>Your Name &lt;you@example.com&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">description</td><td style="vertical-align:top;">:</td><td><div>a cool new app</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">generator</td><td style="vertical-align:top;">:</td><td><div>Web2py Web Framework</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">keywords</td><td style="vertical-align:top;">:</td><td><div>web2py, python, framework</div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">models_to_run</td><td style="vertical-align:top;">:</td><td><div><table><tr><td><div>^\\w+\\.py$</div></td></tr><tr><td><div>^newsAPI/\\w+\\.py$</div></td></tr><tr><td><div>^newsAPI/test2/\\w+\\.py$</div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">postprocessing</td><td style="vertical-align:top;">:</td><td><div><table></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_client</td><td style="vertical-align:top;">:</td><td><div>127.0.0.1</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_cookie_compression_level</td><td style="vertical-align:top;">:</td><td><div>None</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_cookie_expires</td><td style="vertical-align:top;">:</td><td><div>None</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_cookie_key</td><td style="vertical-align:top;">:</td><td><div>None</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_data_name</td><td style="vertical-align:top;">:</td><td><div>session_data_fbbrt</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_file</td><td style="vertical-align:top;">:</td><td><div>&lt;open file &#x27;/Users/logyuan/Documents/web2py/applications/fbbrt/sessions/127.0.0.1-67c97287-622b-4a90-a229-473ada0a2eb9&#x27;, mode &#x27;rb+&#x27; at 0x161d85540&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_filename</td><td style="vertical-align:top;">:</td><td><div>/Users/logyuan/Documents/web2py/applications/fbbrt/sessions/127.0.0.1-67c97287-622b-4a90-a229-473ada0a2eb9</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_hash</td><td style="vertical-align:top;">:</td><td><div>894c0818586e2e7e9b85e302c45bd92f</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_id</td><td style="vertical-align:top;">:</td><td><div>127.0.0.1-67c97287-622b-4a90-a229-473ada0a2eb9</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_id_name</td><td style="vertical-align:top;">:</td><td><div>session_id_fbbrt</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_locked</td><td style="vertical-align:top;">:</td><td><div>True</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_masterapp</td><td style="vertical-align:top;">:</td><td><div>fbbrt</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_new</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_storage_type</td><td style="vertical-align:top;">:</td><td><div>file</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">status</td><td style="vertical-align:top;">:</td><td><div>200</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">subtitle</td><td style="vertical-align:top;">:</td><td><div>customize me!</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">title</td><td style="vertical-align:top;">:</td><td><div>Fbbrt</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">view</td><td style="vertical-align:top;">:</td><td><div>newsAPI/test2.html</div></td></tr></table></div>'
tRp245
sS'locals'
p246
(dp247
S'fb_url'
p248
S"'http://www.chinatimes.com/realtimenews/20150224003717-260405'"
p249
sS'description'
p250
S"u'\\u767c\\u5c55\\u89c0\\u5149\\u9760\\u4ea4\\u901a\\uff...\\u534a\\u5e74\\u5ea6\\u6b63\\u5f0f\\u4e0a\\u8def\\u3002'"
p251
sS'title'
p252
S"u'\\u6e05\\u6cc9\\u5d17\\u6a5f\\u5834\\u5df4\\u58eb\\u4e...574\\u8def\\u7dda - \\u4e2d\\u6642\\u96fb\\u5b50\\u5831'"
p253
sS'og'
p254
S"{'comment_count': 0, 'created_time': datetime.datetime(2015, 2, 24, 10, 42, 42), 'created_time_tw': datetime.datetime(2015, 2, 24, 18, 42, 42), 'description': u'\\u767c\\u5c55\\u89c0\\u5149\\u9760\\u4ea4\\u901a\\uff...\\u534a\\u5e74\\u5ea6\\u6b63\\u5f0f\\u4e0a\\u8def\\u3002', 'fb_url': 'http://www.chinatimes.com/realtimenews/20150224003717-260405', 'fid': '794438463980614', 'share_count': 40, 'title': u'\\u6e05\\u6cc9\\u5d17\\u6a5f\\u5834\\u5df4\\u58eb\\u4e...574\\u8def\\u7dda - \\u4e2d\\u6642\\u96fb\\u5b50\\u5831', 'type': 'website', 'updated_time': datetime.datetime(2015, 2, 25, 16, 9, 41), ...}"
p255
sS'graph'
p256
S'<facebook.GraphAPI object>'
p257
sS'url_list'
p258
S"['http://www.chinatimes.com/newspapers/20150225000564-260107', 'http://n.yam.com/taiwanhot/place/20150224/20150224882363.html', 'http://www.chinatimes.com/realtimenews/20150224003717-260405', 'http://news.rti.org.tw/news/detail/?recordId=173507', 'http://n.yam.com/udn/life/20150212/20150212866859.html', 'https://video.udn.com/news/280186', 'http://www.chinatimes.com/realtimenews/20150223002434-260405', 'http://news.ltn.com.tw/news/focus/paper/857243', 'http://www.chinatimes.com/newspapers/20150223000068-260210', 'http://www.times-bignews.com/news/26483/%E5%8F%B...7%9A%E5%85%AC%E8%BB%8A%E5%8F%AF%E5%89%8D%E5%BE%80']"
p259
sS'fid'
p260
S"'794438463980614'"
p261
sS'ogs'
p262
S"[{'comment_count': 0, 'created_time': datetime.datetime(2015, 2, 24, 20, 10, 46), 'created_time_tw': datetime.datetime(2015, 2, 25, 4, 10, 46), 'description': u'\\u53f0\\u4e2d\\u5e02\\u767c\\u5c55\\u89c0\\u5149\\u97...\\u534a\\u5e74\\u5ea6\\u6b63\\u5f0f\\u4e0a\\u8def\\u3002', 'fb_url': 'http://www.chinatimes.com/newspapers/20150225000564-260107', 'fid': '801878563201141', 'share_count': 0, 'title': u'\\u6a5f\\u5834\\u5230\\u5e02\\u5340\\u5feb\\u6377\\u5d...c07\\u8abf\\u6574 - \\u4e2d\\u6642\\u96fb\\u5b50\\u5831', 'type': 'website', 'updated_time': datetime.datetime(2015, 2, 25, 21, 0, 32), ...}, {'comment_count': 0, 'created_time': datetime.datetime(2015, 2, 24, 15, 24, 38), 'created_time_tw': datetime.datetime(2015, 2, 24, 23, 24, 38), 'description': u'\\u300c\\u5927\\u5e74\\u521d\\u516d\\u958b\\u5de5\\u65...3bb\\u5e74\\u516b\\u6708\\u52d5\\u5de5\\u5f8c\\uff0c...', 'fb_url': 'http://n.yam.com/taiwanhot/place/20150224/20150224882363.html', 'fid': '858567924189841', 'share_count': 67, 'title': u'\\u6771\\u52e2\\u8c50\\u539f\\u751f\\u6d3b\\u5708\\u90...\\u3000\\u6771\\u52e2\\u4eba\\u6297\\u8b70\\u6012\\u543c', 'type': 'article', 'updated_time': datetime.datetime(2015, 2, 25, 16, 9, 27), ...}, {'comment_count': 0, 'created_time': datetime.datetime(2015, 2, 24, 10, 42, 42), 'created_time_tw': datetime.datetime(2015, 2, 24, 18, 42, 42), 'description': u'\\u767c\\u5c55\\u89c0\\u5149\\u9760\\u4ea4\\u901a\\uff...\\u534a\\u5e74\\u5ea6\\u6b63\\u5f0f\\u4e0a\\u8def\\u3002', 'fb_url': 'http://www.chinatimes.com/realtimenews/20150224003717-260405', 'fid': '794438463980614', 'share_count': 40, 'title': u'\\u6e05\\u6cc9\\u5d17\\u6a5f\\u5834\\u5df4\\u58eb\\u4e...574\\u8def\\u7dda - \\u4e2d\\u6642\\u96fb\\u5b50\\u5831', 'type': 'website', 'updated_time': datetime.datetime(2015, 2, 25, 16, 9, 41), ...}]"
p263
sS'created_time_tw'
p264
S'datetime.datetime(2015, 2, 24, 18, 42, 42)'
p265
sS'url'
p266
S"'http://news.rti.org.tw/news/detail/%3FrecordId%3D173507'"
p267
sS'comment_count'
p268
S'0'
sS'result'
p269
S"{'http://n.yam.com/taiwanhot/place/20150224/20150224882363.html': {'id': 'http://n.yam.com/taiwanhot/place/20150224/20150224882363.html', 'og_object': {'created_time': '2015-02-24T15:24:38+0000', 'description': u'\\u300c\\u5927\\u5e74\\u521d\\u516d\\u958b\\u5de5\\u65...3bb\\u5e74\\u516b\\u6708\\u52d5\\u5de5\\u5f8c\\uff0c...', 'id': '858567924189841', 'title': u'\\u6771\\u52e2\\u8c50\\u539f\\u751f\\u6d3b\\u5708\\u90...\\u3000\\u6771\\u52e2\\u4eba\\u6297\\u8b70\\u6012\\u543c', 'type': 'article', 'updated_time': '2015-02-25T16:09:27+0000', 'url': 'http://n.yam.com/taiwanhot/place/20150224/20150224882363.html'}, 'share': {'comment_count': 0, 'share_count': 67}}, 'http://n.yam.com/udn/life/20150212/20150212866859.html': {'id': 'http://n.yam.com/udn/life/20150212/20150212866859.html', 'og_object': {'created_time': '2015-02-11T23:27:39+0000', 'description': u'\\u4e2d\\u5e02\\u77e5\\u540d\\u7684BRT\\u96d9\\u7bc0\\...05e\\u554f\\uff0c\\u7db2\\u53cb\\u8b4f\\u8af7\\u56e0...', 'id': '1016340705062516', 'title': u'\\u626f\\uff01\\u53f0\\u4e2dBRT\\u7ad9\\u516c\\u5730 \\u6709\\u4eba\\u7a2e\\u83dc', 'type': 'article', 'updated_time': '2015-02-23T19:55:43+0000', 'url': 'http://n.yam.com/udn/life/20150212/20150212866859.html'}, 'share': {'comment_count': 1, 'share_count': 7}}, 'http://news.ltn.com.tw/news/focus/paper/857243': {'id': 'http://news.ltn.com.tw/news/focus/paper/857243', 'og_object': {'created_time': '2015-02-20T22:01:29+0000', 'description': u'\\u300c\\u4eca\\u5e74\\uff0c\\u662f\\u53f0\\u4e2d\\u88...\\u5eff\\u4e00\\u842c\\u7968\\u7684\\u7d00\\u9304\\u3002', 'id': '867848656611655', 'title': u'\\u81ea\\u7531\\u4e4b\\u661f\\uff0f\\u6797\\u4f73\\u9f...ede - \\u81ea\\u7531\\u6642\\u5831\\u96fb\\u5b50\\u5831', 'type': 'article', 'updated_time': '2015-03-03T12:29:51+0000', 'url': 'http://news.ltn.com.tw/news/focus/paper/857243'}, 'share': {'comment_count': 0, 'share_count': 14}}, 'http://news.rti.org.tw/news/detail/?recordId=173507': {'id': 'http://news.rti.org.tw/news/detail/?recordId=173507', 'og_object': {'created_time': '2015-02-25T18:46:25+0000', 'id': '955493124462141', 'type': 'website', 'updated_time': '2015-02-25T18:46:25+0000', 'url': 'http://news.rti.org.tw/news/detail/%3FrecordId%3D173507'}, 'share': {'comment_count': 0, 'share_count': 0}}, 'http://www.chinatimes.com/newspapers/20150223000068-260210': {'id': 'http://www.chinatimes.com/newspapers/20150223000068-260210', 'og_object': {'created_time': '2015-02-22T20:09:43+0000', 'description': u'\\u653f\\u5e9c\\u6301\\u7e8c\\u6253\\u623f\\u5f71\\u97...\\u65cf\\u8207\\u9996\\u8cfc\\u65cf\\u9752\\u775e\\u3002', 'id': '848611578530771', 'title': u'\\u53f0\\u4e2d\\u623f\\u5e02 \\u81ea\\u4f4f\\u8cb7\\u76e4\\u652f\\u6490 - \\u4e2d\\u6642\\u96fb\\u5b50\\u5831', 'type': 'website', 'updated_time': '2015-02-23T19:55:11+0000', 'url': 'http://www.chinatimes.com/newspapers/20150223000068-260210'}, 'share': {'comment_count': 0, 'share_count': 89}}, 'http://www.chinatimes.com/newspapers/20150225000564-260107': {'id': 'http://www.chinatimes.com/newspapers/20150225000564-260107', 'og_object': {'created_time': '2015-02-24T20:10:46+0000', 'description': u'\\u53f0\\u4e2d\\u5e02\\u767c\\u5c55\\u89c0\\u5149\\u97...\\u534a\\u5e74\\u5ea6\\u6b63\\u5f0f\\u4e0a\\u8def\\u3002', 'id': '801878563201141', 'title': u'\\u6a5f\\u5834\\u5230\\u5e02\\u5340\\u5feb\\u6377\\u5d...c07\\u8abf\\u6574 - \\u4e2d\\u6642\\u96fb\\u5b50\\u5831', 'type': 'website', 'updated_time': '2015-02-25T21:00:32+0000', 'url': 'http://www.chinatimes.com/newspapers/20150225000564-260107'}, 'share': {'comment_count': 0, 'share_count': 0}}, 'http://www.chinatimes.com/realtimenews/20150223002434-260405': {'id': 'http://www.chinatimes.com/realtimenews/20150223002434-260405', 'og_object': {'created_time': '2015-02-23T09:12:13+0000', 'description': u'104\\u5e74\\u53f0\\u7063\\u71c8\\u6703\\u79fb\\u5e2b\\...\\u7279\\u5b9a\\u5340\\u6b63\\u5f0f\\u9ede\\u71c8\\u3002', 'id': '671626006281598', 'title': u'\\u53f0\\u7063\\u71c8\\u6703\\u79fb\\u5e2b\\u53f0\\u4e...97d\\u8cde\\u71c8 - \\u4e2d\\u6642\\u96fb\\u5b50\\u5831', 'type': 'website', 'updated_time': '2015-03-03T01:03:17+0000', 'url': 'http://www.chinatimes.com/realtimenews/20150223002434-260405'}, 'share': {'comment_count': 0, 'share_count': 1525}}, 'http://www.chinatimes.com/realtimenews/20150224003717-260405': {'id': 'http://www.chinatimes.com/realtimenews/20150224003717-260405', 'og_object': {'created_time': '2015-02-24T10:42:42+0000', 'description': u'\\u767c\\u5c55\\u89c0\\u5149\\u9760\\u4ea4\\u901a\\uff...\\u534a\\u5e74\\u5ea6\\u6b63\\u5f0f\\u4e0a\\u8def\\u3002', 'id': '794438463980614', 'title': u'\\u6e05\\u6cc9\\u5d17\\u6a5f\\u5834\\u5df4\\u58eb\\u4e...574\\u8def\\u7dda - \\u4e2d\\u6642\\u96fb\\u5b50\\u5831', 'type': 'website', 'updated_time': '2015-02-25T16:09:41+0000', 'url': 'http://www.chinatimes.com/realtimenews/20150224003717-260405'}, 'share': {'comment_count': 0, 'share_count': 40}}, 'http://www.times-bignews.com/news/26483/%E5%8F%B...7%9A%E5%85%AC%E8%BB%8A%E5%8F%AF%E5%89%8D%E5%BE%80': {'id': 'http://www.times-bignews.com/news/26483/%E5%8F%B...7%9A%E5%85%AC%E8%BB%8A%E5%8F%AF%E5%89%8D%E5%BE%80', 'og_object': {'created_time': '2015-02-19T02:13:00+0000', 'description': u'\\u53f0\\u4e2d\\uff0f\\u70ba\\u56e0\\u61c9\\u70ba\\u67...\\u6062\\u5fa9\\u539f\\u670d\\u52d9\\u73ed\\u6b21\\u3002', 'id': '719023854863317', 'title': u'\\u53f0\\u4e2d\\uff0f\\u5927\\u7532\\u93ae\\u703e\\u5bae\\u300014\\u7dda\\u516c\\u8eca\\u53ef\\u524d\\u5f80', 'type': 'article', 'updated_time': '2015-02-25T18:46:32+0000', 'url': 'http://www.times-bignews.com/news/26483/%E5%8F%B...7%9A%E5%85%AC%E8%BB%8A%E5%8F%AF%E5%89%8D%E5%BE%80'}, 'share': {'comment_count': 0, 'share_count': 0}}, 'https://video.udn.com/news/280186': {'id': 'https://video.udn.com/news/280186', 'og_object': {'created_time': '2015-02-23T15:24:03+0000', 'description': u'2015\\u53f0\\u7063\\u71c8\\u6703\\u79fb\\u5e2b\\u53f0...90e8\\u8207\\u53f0\\u4e2d\\u5e02\\u653f\\u5e9c\\u5df2..', 'id': '1026388484055990', 'title': u'2015\\u71c8\\u6703\\u5728\\u53f0\\u4e2d \\u9ad8\\u943...3f0\\u9435\\u589e\\u73ed | \\u806f\\u5408\\u5f71\\u97f3', 'type': 'article', 'updated_time': '2015-02-23T19:55:05+0000', 'url': 'https://video.udn.com/news/280186'}, 'share': {'comment_count': 0, 'share_count': 0}}}"
p270
sS'urls'
p271
S"'http://www.chinatimes.com/newspapers/20150225000...7%9A%E5%85%AC%E8%BB%8A%E5%8F%AF%E5%89%8D%E5%BE%80'"
p272
sS'created_time'
p273
S'datetime.datetime(2015, 2, 24, 10, 42, 42)'
p274
sS'share_count'
p275
S'40'
p276
sS'updated_time'
p277
S'datetime.datetime(2015, 2, 25, 16, 9, 41)'
p278
sS'type'
p279
S"'website'"
p280
sS'updated_time_tw'
p281
S'datetime.datetime(2015, 2, 26, 0, 9, 41)'
p282
sssS'traceback'
p283
S'Traceback (most recent call last):\n  File "/Users/logyuan/Documents/web2py/gluon/restricted.py", line 220, in restricted\n    exec ccode in environment\n  File "/Users/logyuan/Documents/web2py/applications/fbbrt/controllers/newsAPI.py", line 534, in <module>\n  File "/Users/logyuan/Documents/web2py/gluon/globals.py", line 385, in <lambda>\n    self._caller = lambda f: f()\n  File "/Users/logyuan/Documents/web2py/applications/fbbrt/controllers/newsAPI.py", line 102, in test2\n    newsbrt.updateAllSocialCount()\n  File "/Users/logyuan/Documents/web2py/applications/fbbrt/models/graph.py", line 595, in updateAllSocialCount\n    getGroupUrlsSocialCount(urls)\n  File "/Users/logyuan/Documents/web2py/gluon/tools.py", line 3287, in f\n    return action(*a, **b)\n  File "/Users/logyuan/Documents/web2py/applications/fbbrt/models/graph.py", line 1756, in getGroupUrlsSocialCount\n    ogs = get_og_urls(urls)\n  File "/Users/logyuan/Documents/web2py/gluon/tools.py", line 3287, in f\n    return action(*a, **b)\n  File "/Users/logyuan/Documents/web2py/applications/fbbrt/models/graph.py", line 1530, in get_og_urls\n    fid = result[url]["og_object"]["id"] if \'og_object\' in result[url] else None\nKeyError: \'http://news.rti.org.tw/news/detail/%3FrecordId%3D173507\'\n'
p284
s.